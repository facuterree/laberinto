<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laberinto de Alicia</title>
<style>
  body {
    margin: 0;
    background-color: #000;
    font-family: sans-serif;
    overflow: hidden;
  }

  #game {
    position: relative;
    width: 800px;
    height: 800px;
    margin: 20px auto;
    background-color: #111;
    border: 3px solid #fff;
  }

  .wall {
    position: absolute;
    background-color: #333;
    border: 2px solid #555;
  }

  .potion {
    position: absolute;
    width: 30px;
    height: 30px;
    font-size: 24px;
    text-align: center;
    line-height: 30px;
  }

  #player {
    position: absolute;
    width: 40px;
    height: 40px;
    font-size: 32px;
    text-align: center;
    line-height: 40px;
  }

  #exit {
    position: absolute;
    width: 50px;
    height: 50px;
    font-size: 48px;
    text-align: center;
    line-height: 50px;
  }

  #hud {
    color: #fff;
    font-size: 20px;
    text-align: center;
    margin-bottom: 10px;
  }

  #message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 32px;
    text-align: center;
    display: none;
    background: rgba(0,0,0,0.8);
    padding: 20px;
    border-radius: 15px;
  }
</style>
</head>
<body>
<div id="hud">‚è∞ Tiempo: <span id="timer">60</span>s</div>
<div id="game">
  <div id="player">üëß</div>
  <div id="exit">üö™</div>
  <div class="potion" style="left:150px; top:150px;">üíß</div>
  <div class="potion" style="left:600px; top:100px;">üíß</div>
  <div class="potion" style="left:300px; top:600px;">üíß</div>
  <div class="potion" style="left:700px; top:700px;">üíß</div>
  <div class="wall" style="left:0; top:0; width:800px; height:20px;"></div>
  <div class="wall" style="left:0; top:0; width:20px; height:800px;"></div>
  <div class="wall" style="left:0; bottom:0; width:800px; height:20px;"></div>
  <div class="wall" style="right:0; top:0; width:20px; height:800px;"></div>
  <!-- Pasillos internos -->
  <div class="wall" style="left:100px; top:100px; width:600px; height:20px;"></div>
  <div class="wall" style="left:100px; top:100px; width:20px; height:600px;"></div>
  <div class="wall" style="left:680px; top:100px; width:20px; height:600px;"></div>
  <div class="wall" style="left:100px; top:680px; width:600px; height:20px;"></div>
  <div class="wall" style="left:300px; top:200px; width:20px; height:400px;"></div>
  <div class="wall" style="left:500px; top:200px; width:20px; height:400px;"></div>
</div>
<div id="message"></div>
<script>
const player = document.getElementById('player');
const exit = document.getElementById('exit');
const potions = document.querySelectorAll('.potion');
const walls = document.querySelectorAll('.wall');
const timerEl = document.getElementById('timer');
const message = document.getElementById('message');

let posX = 50, posY = 50;
let speed = 10;
let size = 1;
let timeLeft = 60;
let gameOver = false;

player.style.left = posX + 'px';
player.style.top = posY + 'px';
exit.style.left = '720px';
exit.style.top = '720px';

function checkCollision(x, y) {
  const playerRect = {left:x, top:y, right:x+40*size, bottom:y+40*size};
  for(const wall of walls){
    const rect = wall.getBoundingClientRect();
    const g = wall.parentElement.getBoundingClientRect();
    const wallRect = {left:rect.left-g.left, top:rect.top-g.top, right:rect.right-g.left, bottom:rect.bottom-g.top};
    if(playerRect.left < wallRect.right && playerRect.right > wallRect.left && playerRect.top < wallRect.bottom && playerRect.bottom > wallRect.top){
      return true;
    }
  }
  return false;
}

document.addEventListener('keydown', e => {
  if(gameOver) return;
  let nextX = posX;
  let nextY = posY;
  if(e.key==='ArrowUp'||e.key==='w') nextY-=speed;
  if(e.key==='ArrowDown'||e.key==='s') nextY+=speed;
  if(e.key==='ArrowLeft'||e.key==='a') nextX-=speed;
  if(e.key==='ArrowRight'||e.key==='d') nextX+=speed;
  if(!checkCollision(nextX,nextY)){
    posX=nextX; posY=nextY;
    player.style.left=posX+'px';
    player.style.top=posY+'px';
    checkPotion();
    checkExit();
  }
});

function checkPotion(){
  const pRect = player.getBoundingClientRect();
  potions.forEach(p=>{
    const rect = p.getBoundingClientRect();
    if(p.style.display!=='none' && pRect.x<pRect.width+rect.x && pRect.x+pRect.width>rect.x && pRect.y<pRect.height+rect.y && pRect.y+pRect.height>rect.y){
      p.style.display='none';
      size=1; player.style.transform='scale(1)';
      timeLeft+=10; timerEl.textContent=timeLeft;
    }
  });
}

function checkExit(){
  const pRect = player.getBoundingClientRect();
  const eRect = exit.getBoundingClientRect();
  if(pRect.x<pRect.width+eRect.x && pRect.x+pRect.width>eRect.x && pRect.y<pRect.height+eRect.y && pRect.y+pRect.height>eRect.y){
    gameOver=true;
    message.style.display='block';
    message.textContent='üéâ ¬°Felicidades, lograste que Alicia salga del laberinto!';
  }
}

const growthInterval = setInterval(()=>{
  if(gameOver) return;
  size+=0.05;
  player.style.transform='scale('+size+')';
  if(size>=2){
    gameOver=true;
    message.style.display='block';
    message.textContent='üò¢ Alicia creci√≥ demasiado y qued√≥ atrapada';
  }
},4000);

const timerInterval = setInterval(()=>{
  if(gameOver) return;
  timeLeft--;
  timerEl.textContent=timeLeft;
  if(timeLeft<=0){
    gameOver=true;
    message.style.display='block';
    message.textContent='‚è∞ Se acab√≥ el tiempo, Alicia qued√≥ atrapada';
  }
},1000);
</script>
</body>
</html>
