<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>El Laberinto del Tiempo - Alicia</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #000;
      font-family: 'Trebuchet MS', sans-serif;
      color: #fff;
    }

    #game {
      position: relative;
      width: 100vw;
      height: 100vh;
      background-color: #000;
      overflow: hidden;
    }

    .wall {
      position: absolute;
      background-color: #222;
      border: 2px solid #555;
      box-shadow: 0 0 10px #ffb6f9;
      border-radius: 5px;
    }

    #player {
      position: absolute;
      width: 60px;
      height: 60px;
      background-image: url('https://i.imgur.com/NX7cT1b.png'); /* Cara de Alicia */
      background-size: cover;
      left: 50px;
      top: 50px;
      transition: transform 0.3s;
      border-radius: 50%;
      box-shadow: 0 0 20px #ffccff;
      z-index: 5;
    }

    #potion {
      position: absolute;
      width: 30px;
      height: 30px;
      background-image: url('https://i.imgur.com/MR3XOiP.png');
      background-size: cover;
      left: 850px;
      top: 350px;
      z-index: 3;
    }

    #hud {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 22px;
      background: rgba(0,0,0,0.6);
      padding: 10px 15px;
      border-radius: 10px;
    }

    #message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 40px;
      text-align: center;
      display: none;
      background: rgba(0,0,0,0.7);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px #ffb6f9;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="player"></div>
    <div id="potion"></div>
    <div id="hud">‚è∞ Tiempo: <span id="timer">60</span>s</div>
    <div id="message"></div>

    <!-- Paredes del laberinto -->
    <div class="wall" style="left:0; top:0; width:100%; height:20px;"></div>
    <div class="wall" style="left:0; bottom:0; width:100%; height:20px;"></div>
    <div class="wall" style="left:0; top:0; width:20px; height:100%;"></div>
    <div class="wall" style="right:0; top:0; width:20px; height:100%;"></div>

    <!-- Pasillos internos -->
    <div class="wall" style="left:100px; top:100px; width:400px; height:20px;"></div>
    <div class="wall" style="left:100px; top:100px; width:20px; height:300px;"></div>
    <div class="wall" style="left:480px; top:100px; width:20px; height:250px;"></div>
    <div class="wall" style="left:200px; top:380px; width:300px; height:20px;"></div>
    <div class="wall" style="left:600px; top:150px; width:20px; height:300px;"></div>
    <div class="wall" style="left:600px; top:150px; width:300px; height:20px;"></div>
    <div class="wall" style="left:900px; top:150px; width:20px; height:400px;"></div>
    <div class="wall" style="left:700px; top:530px; width:200px; height:20px;"></div>
  </div>

  <script>
    const player = document.getElementById('player');
    const potion = document.getElementById('potion');
    const message = document.getElementById('message');
    const timerEl = document.getElementById('timer');
    const walls = document.querySelectorAll('.wall');

    let posX = 50, posY = 50;
    let speed = 10;
    let timeLeft = 60;
    let size = 1;
    let gameOver = false;

    // Movimiento con detecci√≥n de colisiones
    document.addEventListener('keydown', (e) => {
      if (gameOver) return;
      let nextX = posX;
      let nextY = posY;

      if (e.key === 'ArrowUp' || e.key === 'w') nextY -= speed;
      if (e.key === 'ArrowDown' || e.key === 's') nextY += speed;
      if (e.key === 'ArrowLeft' || e.key === 'a') nextX -= speed;
      if (e.key === 'ArrowRight' || e.key === 'd') nextX += speed;

      if (!checkCollision(nextX, nextY)) {
        posX = nextX;
        posY = nextY;
        player.style.left = posX + 'px';
        player.style.top = posY + 'px';
        checkPotionCollision();
      }
    });

    function checkCollision(x, y) {
      const playerRect = {
        left: x,
        right: x + player.offsetWidth,
        top: y,
        bottom: y + player.offsetHeight
      };
      for (const wall of walls) {
        const r = wall.getBoundingClientRect();
        const g = player.parentElement.getBoundingClientRect();
        const wallRect = {
          left: r.left - g.left,
          right: r.right - g.left,
          top: r.top - g.top,
          bottom: r.bottom - g.top
        };
        if (
          playerRect.left < wallRect.right &&
          playerRect.right > wallRect.left &&
          playerRect.top < wallRect.bottom &&
          playerRect.bottom > wallRect.top
        ) {
          return true;
        }
      }
      return false;
    }

    // Alicia crece con el tiempo
    setInterval(() => {
      if (gameOver) return;
      size += 0.05;
      player.style.transform = `scale(${size})`;
      if (size >= 2) endGame('Alicia creci√≥ demasiado y qued√≥ atrapada üò¢');
    }, 4000);

    // Temporizador
    const countdown = setInterval(() => {
      if (gameOver) return;
      timeLeft--;
      timerEl.textContent = timeLeft;
      if (timeLeft <= 0) endGame('¬°El tiempo se acab√≥! ‚è≥');
    }, 1000);

    // Colisi√≥n con la poci√≥n
    function checkPotionCollision() {
      const playerRect = player.getBoundingClientRect();
      const potionRect = potion.getBoundingClientRect();
      if (
        playerRect.x < potionRect.x + potionRect.width &&
        playerRect.x + playerRect.width > potionRect.x &&
        playerRect.y < potionRect.y + potionRect.height &&
        playerRect.y + playerRect.height > potionRect.y
      ) {
        potion.style.display = 'none';
        size = 1;
        player.style.transform = 'scale(1)';
        timeLeft += 10;
        timerEl.textContent = timeLeft;
        showTempMessage('‚ú® ¬°Alicia se hizo peque√±a otra vez! +10s ‚ú®');
      }
    }

    // Mensajes
    function endGame(text) {
      gameOver = true;
      message.style.display = 'block';
      message.textContent = text;
      clearInterval(countdown);
    }

    function showTempMessage(text) {
      message.style.display = 'block';
      message.textContent = text;
      setTimeout(() => message.style.display = 'none', 2000);
    }
  </script>
</body>
</html>
